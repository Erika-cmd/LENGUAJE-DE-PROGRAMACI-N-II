import time
import sys

def limpiar_pantalla():
    """Limpia la consola para una mejor experiencia de usuario."""
    # Para sistemas Windows
    if sys.platform.startswith('win'):
        os.system('cls')
    # Para sistemas Unix (Linux, macOS)
    else:
        os.system('clear')

def mostrar_estado(inventario, objetivo_chupetines, mensaje=""):
    """Muestra el inventario actual y el estado del juego."""
    # limpiar_pantalla() # Descomentar si quieres limpiar la pantalla en cada actualizaciÃ³n
    print("\n" + "="*50)
    print("        LOS SOBREVIVIENTES: El DesafÃ­o de los Caramelos")
    print("="*50)
    print(f"\nOBJETIVO: Obtener {objetivo_chupetines} Chupetines para el grupo.")
    print("\n--- TU INVENTARIO ACTUAL ---")
    print(f"ğŸ‹ Caramelos de LimÃ³n: {inventario['limon']}")
    print(f"ğŸ¥š Caramelos de Huevo: {inventario['huevo']}")
    print(f"ğŸ Caramelos de Pera: {inventario['pera']}")
    print(f"ğŸ­ Chupetines: {inventario['chupetin']} / {objetivo_chupetines}")
    print("\n" + "-"*50)
    if mensaje:
        print(f"MENSAJE: {mensaje}")
    print("-" * 50)

def verificar_fin_juego(inventario, objetivo_chupetines):
    """Verifica si el juego ha terminado (victoria o derrota)."""
    # CondiciÃ³n de Victoria
    if inventario['chupetin'] >= objetivo_chupetines:
        mostrar_estado(inventario, objetivo_chupetines, "Â¡VICTORIA! Â¡Todos los Sobrevivientes tienen su chupetÃ­n!")
        return True, True # Juego terminado, Ganaste

    # CondiciÃ³n de Derrota (no hay mÃ¡s movimientos posibles)
    can_create = (inventario['limon'] >= 2 and inventario['pera'] >= 2 and inventario['huevo'] >= 2)
    can_exchange = (inventario['chupetin'] >= 1)

    if not can_create and not can_exchange:
        mostrar_estado(inventario, objetivo_chupetines, "Â¡DERROTA! No hay mÃ¡s movimientos posibles y no alcanzaste la meta.")
        return True, False # Juego terminado, Perdiste

    return False, False # Juego no terminado

def jugar():
    """FunciÃ³n principal del juego."""
    inventario = {
        'limon': 7, # Ejemplo: 7 de limÃ³n
        'pera': 7,  # Ejemplo: 7 de pera
        'huevo': 6, # Ejemplo: 6 de huevo
        'chupetin': 0
    }
    objetivo_chupetines = 10
    
    juego_terminado = False
    victoria = False
    
    while not juego_terminado:
        mostrar_estado(inventario, objetivo_chupetines)
        
        print("\n--- OPCIONES ---")
        print("1. Crear 1 ChupetÃ­n (Necesitas: 2ğŸ‹, 2ğŸ¥š, 2ğŸ)")
        print("2. Canjear 1 ChupetÃ­n por Caramelos (Recibes: 2ğŸ‹, 2ğŸ¥š, 2ğŸ)")
        print("3. Salir del Juego")
        
        opcion = input("Elige tu acciÃ³n (1, 2 o 3): ")
        
        mensaje_accion = ""
        if opcion == '1':
            if inventario['limon'] >= 2 and inventario['huevo'] >= 2 and inventario['pera'] >= 2:
                inventario['limon'] -= 2
                inventario['huevo'] -= 2
                inventario['pera'] -= 2
                inventario['chupetin'] += 1
                mensaje_accion = "Â¡ChupetÃ­n creado! Has usado 2ğŸ‹, 2ğŸ¥š, 2ğŸ."
            else:
                mensaje_accion = "âŒ Â¡Faltan caramelos para crear un chupetÃ­n! Necesitas 2 de cada tipo."
        elif opcion == '2':
            if inventario['chupetin'] >= 1:
                inventario['chupetin'] -= 1
                inventario['limon'] += 2
                inventario['huevo'] += 2
                inventario['pera'] += 2
                mensaje_accion = "âœ… Â¡ChupetÃ­n canjeado! Has recibido 2ğŸ‹, 2ğŸ¥š, 2ğŸ."
            else:
                mensaje_accion = "âŒ No tienes chupetines para canjear."
        elif opcion == '3':
            print("Saliendo del juego. Â¡Gracias por jugar a Los Sobrevivientes!")
            time.sleep(2) # Espera un poco antes de salir
            sys.exit()
        else:
            mensaje_accion = "OpciÃ³n no vÃ¡lida. Por favor, elige 1, 2 o 3."

        juego_terminado, victoria = verificar_fin_juego(inventario, objetivo_chupetines)
        if not juego_terminado: # Solo muestra el mensaje si el juego no ha terminado
            mostrar_estado(inventario, objetivo_chupetines, mensaje_accion)
            time.sleep(2) # Espera un poco para que el usuario lea el mensaje
    
    # DespuÃ©s de que el bucle termina, se muestra el mensaje final de victoria o derrota.
    print("\n--- FIN DEL JUEGO ---")
    if victoria:
        print("Â¡Felicidades! Lograste que todos los Sobrevivientes tuvieran su chupetÃ­n.")
    else:
        print("No lograste tu objetivo. Los Sobrevivientes tendrÃ¡n que buscar otras soluciones...")
    print("="*50)
    print("Presiona Enter para salir.")
    input() # Espera a que el usuario presione Enter para cerrar la consola

if __name__ == "__main__":
    import os # Importa os aquÃ­ para limpiar_pantalla
    jugar()